<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Student Attendance</title>
  <style>
    :root{
      --bg:#0b1020; --panel:#141a2e; --muted:#97a0b3; --text:#eaf0ff; --accent:#6aa6ff; --ok:#27c93f; --warn:#ffbd2e; --bad:#ff5f56;
      --radius:14px;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial; background:linear-gradient(180deg,#0b1020,#0f1630 60%,#0b1020); color:var(--text)}
    header{position:sticky; top:0; z-index:5; backdrop-filter:saturate(140%) blur(6px); background:#0b1020cc; border-bottom:1px solid #1e2744}
    .wrap{max-width:1100px; margin:0 auto; padding:16px}
    h1{font-size:clamp(22px,2.2vw,28px); margin:0 0 8px; letter-spacing:.3px}
    .grid{display:grid; gap:12px}
    .controls{display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px}
    @media (max-width:800px){.controls{grid-template-columns:1fr}}
    .card{background:var(--panel); border:1px solid #1f2948; border-radius:var(--radius); padding:14px; box-shadow:0 10px 30px #00000033}
    label{font-size:14px; color:var(--muted); display:block; margin-bottom:6px}
    input[type="text"], input[type="date"], select {width:100%; padding:12px 12px; border-radius:12px; border:1px solid #243156; background:#0e1530; color:var(--text); outline:none}
    input[type="text"]::placeholder{color:#8b94aa}
    .btn{appearance:none; border:none; padding:10px 14px; border-radius:12px; background:#1b2548; color:var(--text); cursor:pointer; font-weight:600; transition:.2s transform ease, .2s background ease; border:1px solid #26345f}
    .btn:hover{transform:translateY(-1px); background:#223060}
    .btn:active{transform:translateY(0)}
    .btn.primary{background:linear-gradient(180deg,#3e7cff,#2764ea); border-color:#2a5ed8}
    .btn.success{background:linear-gradient(180deg,#29d658,#1fb749); border-color:#1fb749}
    .btn.warn{background:linear-gradient(180deg,#ffcf3a,#ffb400); border-color:#ffb400; color:#1a1600}
    .btn.danger{background:linear-gradient(180deg,#ff6b6b,#e03a3a); border-color:#e03a3a}

    .toolbar{display:flex; gap:8px; flex-wrap:wrap}

    table{width:100%; border-collapse:separate; border-spacing:0 8px}
    thead th{font-size:13px; font-weight:700; color:#9aa6c4; text-align:left; padding:6px 10px}
    tbody tr{background:#0f1734; border:1px solid #1f2a4e}
    tbody tr td{padding:10px; border-top:1px solid #223056; border-bottom:1px solid #223056}
    tbody tr td:first-child{border-left:1px solid #223056; border-top-left-radius:10px; border-bottom-left-radius:10px}
    tbody tr td:last-child{border-right:1px solid #223056; border-top-right-radius:10px; border-bottom-right-radius:10px}
    .row-actions{display:flex; gap:6px}

    .status-chip{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px}
    .present{background:#0d2b16; color:#9affb0; border:1px solid #1c6a2e}
    .absent{background:#2b0d0d; color:#ffb3b3; border:1px solid #6a1c1c}
    .late{background:#2b1f0d; color:#ffd79a; border:1px solid #6a4a1c}

    .summary{display:flex; gap:10px; flex-wrap:wrap}
    .pill{background:#0f1734; border:1px solid #223056; color:#cbd6ff; padding:8px 12px; border-radius:999px; font-weight:700}

    footer{opacity:.7; font-size:12px; padding:20px 12px; text-align:center}

    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>üìò Student Attendance</h1>
      <div class="summary" id="summaryBar" aria-live="polite"></div>
    </div>
  </header>

  <main class="wrap grid" style="margin-top:10px">
    <section class="controls">
      <div class="card">
        <label for="className">Class / Course</label>
        <input id="className" type="text" placeholder="e.g., CSE-A / Math 101" />
      </div>
      <div class="card">
        <label for="section">Section / Period</label>
        <input id="section" type="text" placeholder="e.g., Section A, Period 2" />
      </div>
      <div class="card">
        <label for="attDate">Date</label>
        <input id="attDate" type="date" />
      </div>
    </section>

    <section class="card">
      <div class="toolbar" role="group" aria-label="Attendance actions">
        <button class="btn primary" id="addStudentBtn">+ Add student</button>
        <button class="btn" id="markAllPresentBtn">Mark all Present</button>
        <button class="btn warn" id="clearMarksBtn">Clear marks</button>
        <button class="btn success" id="saveBtn">üíæ Save</button>
        <button class="btn" id="loadBtn">üìÇ Load</button>
        <button class="btn" id="exportCsvBtn">‚¨áÔ∏è Export CSV</button>
        <button class="btn" id="printBtn">üñ®Ô∏è Print</button>
      </div>
    </section>

    <section class="card" aria-labelledby="listHeading">
      <h2 id="listHeading" class="sr-only">Student list</h2>
      <div style="overflow:auto">
        <table id="table" role="grid" aria-describedby="tableHelp">
          <thead>
            <tr>
              <th style="width:60px">#</th>
              <th>Roll No.</th>
              <th>Name</th>
              <th style="width:190px">Status</th>
              <th style="width:240px">Notes</th>
              <th style="width:160px">Actions</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <!-- Rows go here -->
          </tbody>
        </table>
      </div>
      <p id="tableHelp" class="sr-only">Use the Present/Absent/Late buttons to set status. Use Save to store in your browser for the selected date, or Export CSV.</p>
    </section>
  </main>

  <footer>
    Made with ‚ô• for teachers. Data is saved locally in your browser (no server required).
  </footer>

<script>
(function(){
  const tbody = document.getElementById('tbody');
  const attDate = document.getElementById('attDate');
  const className = document.getElementById('className');
  const section = document.getElementById('section');
  const summaryBar = document.getElementById('summaryBar');

  const state = {
    students: [